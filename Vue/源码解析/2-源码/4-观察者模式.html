<script>
  // 发布者-目标
  class Dep {
    constructor() {
      this.subs = []
    }

    addSub(sub){
      if(sub&&sub.update){
        this.subs.push(sub)
      }
    }

    notify(){
      this.subs.forEach(sub=>{
        sub.update()
      })
    }
  }

  class Watcher{
    update(){
      console.log('update')
    }
  }

  let dep = new Dep()

  let watcher1 = new Watcher
  let watcher2 = new Watcher

  dep.addSub(watcher)
  dep.addSub(watcher2)

  dep.notify()
</script>